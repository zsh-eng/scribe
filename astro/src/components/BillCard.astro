---
import type { Bill } from "../lib/db";

interface Props {
    bill: Bill;
}

const { bill } = Astro.props;

const formatDate = (dateStr: string | null) => {
    if (!dateStr) return null;
    return new Date(dateStr).toLocaleDateString("en-SG", {
        year: "numeric",
        month: "short",
        day: "numeric",
    });
};
---

<a
    href={`/bills/${bill.id}`}
    class="block rounded-lg border border-zinc-200 bg-white p-4 transition-all hover:border-purple-300 hover:shadow-md"
>
    <div class="mb-2 flex flex-wrap items-center gap-2">
        {
            bill.ministry && (
                <span class="rounded bg-green-100 px-2 py-0.5 text-xs font-medium text-green-700">
                    {bill.ministry}
                </span>
            )
        }
        {
            bill.firstReadingDate && (
                <span class="rounded bg-purple-100 px-2 py-0.5 text-xs font-medium text-purple-700">
                    1R: {formatDate(bill.firstReadingDate)}
                </span>
            )
        }
    </div>
    <h3 class="line-clamp-2 font-semibold text-zinc-900">
        {bill.title}
    </h3>
</a>
