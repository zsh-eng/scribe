---
import type { Speaker } from '../lib/db';
import { slugify } from '../lib/slugify';

interface Props {
  speakers: Speaker[];
  limit?: number;
}

const { speakers, limit } = Astro.props;

const displaySpeakers = limit ? speakers.slice(0, limit) : speakers;
const remaining = limit && speakers.length > limit ? speakers.length - limit : 0;
---

<div class="flex flex-wrap gap-2">
  {displaySpeakers.map((speaker) => (
    <a
      href={`/members/${slugify(speaker.name, speaker.memberId)}`}
      class="rounded-full border border-border bg-surface px-3 py-1 font-ui text-sm text-ink/70 transition-all hover:border-accent/30 hover:bg-accent/5 hover:text-accent"
    >
      {speaker.name}
      {speaker.designation && (
        <span class="ml-1 text-ink/40">
          ({speaker.designation})
        </span>
      )}
    </a>
  ))}
  {remaining > 0 && (
    <span class="rounded-full border border-border/50 bg-page px-3 py-1 font-ui text-sm text-ink/40">
      +{remaining} more
    </span>
  )}
</div>
